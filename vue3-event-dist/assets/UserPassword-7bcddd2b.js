import{_ as S}from"./PageContainer-c4fd5575.js";import{a as V,r as _,u as k,o as y,c as U,b as l,d as e,g as m,b_ as x,E as R}from"./index-3d212614.js";import{a as C,E as F}from"./el-col-26493748.js";import{E as N,a as q}from"./el-form-item-2c81f57d.js";import{E as B}from"./_plugin-vue_export-helper-287f15d6.js";import{E as $}from"./el-input-0664a9f6.js";import"./el-message-b21aad48.js";const G={__name:"UserPassword",setup(h){const i=V(),r=_({old_pwd:"",new_pwd:"",re_pwd:""}),n=k(),u=_(),w={old_pwd:[{required:!0,message:"请输入密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"}],new_pwd:[{required:!0,message:"请输入新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,o,t)=>{o===r.value.old_pwd?t(new Error("原密码和新密码不能一样!")):t()},trigger:"blur"}],re_pwd:[{required:!0,message:"请再次确认新密码",trigger:"blur"},{pattern:/^\S{6,15}$/,message:"密码长度必须是6-15位的非空字符串",trigger:"blur"},{validator:(d,o,t)=>{o!==r.value.new_pwd?t(new Error("新密码和确认再次输入的新密码不一样!")):t()},trigger:"blur"}]},c=async()=>{await u.value.validate(),await x(r.value),R.success("修改成功"),n.removeToken(),n.setUser({}),i.push("/login")},f=()=>{u.value.resetFields()};return(d,o)=>{const t=$,s=N,p=B,g=q,v=C,b=F,E=S;return y(),U(E,{title:"重置密码"},{default:l(()=>[e(b,null,{default:l(()=>[e(v,{span:12},{default:l(()=>[e(g,{model:r.value,rules:w,ref_key:"formRef",ref:u,"label-width":"100px",size:"large"},{default:l(()=>[e(s,{label:"原密码",prop:"old_pwd"},{default:l(()=>[e(t,{modelValue:r.value.old_pwd,"onUpdate:modelValue":o[0]||(o[0]=a=>r.value.old_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"新密码",prop:"new_pwd"},{default:l(()=>[e(t,{modelValue:r.value.new_pwd,"onUpdate:modelValue":o[1]||(o[1]=a=>r.value.new_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,{label:"确认新密码",prop:"re_pwd"},{default:l(()=>[e(t,{modelValue:r.value.re_pwd,"onUpdate:modelValue":o[2]||(o[2]=a=>r.value.re_pwd=a),type:"password"},null,8,["modelValue"])]),_:1}),e(s,null,{default:l(()=>[e(p,{onClick:c,type:"primary"},{default:l(()=>[m("修改密码")]),_:1}),e(p,{onClick:f},{default:l(()=>[m("重置")]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),_:1})]),_:1})}}};export{G as default};
